<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DECKDESIGN</title>
    <link rel="stylesheet" href="styles.css"> <!-- Link to your CSS file -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Gemunu+Libre:wght@200..800&family=Cinzel:wght@400..900&family=Monomaniac+One&family=ZCOOL+QingKe+HuangYou&family=Solway:wght@300;400;500;700;800&family=Gloria+&family=Montserrat+Alternates:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Russo+One&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</head>
<body>

    <!-- Header Section -->
    <header>
        <!-- <h1>DECK<strong>DESIGN</strong></h1> -->
        <img src="images/Deck-design-visuals.png" style="height: 160px; margin-top: -30px; margin-bottom: -30px;">
        <p>Logan Loves his girlfriend Fenella so so much because she's amazing</p>
        
    </header>

    <!-- Main Content Section -->
    <main>

        <div class="tab" id="customisation"> 
            <!-- Card Backside Customization -->
            <section id="card-backside">
                <div class="tab-title">
                    <h2>Back of Card</h2>
                    <button class="editButton" id="editBackBtn">Edit</button>
                </div>
                <div id="editBack" class="minimise">
                     <!-- Preset Options for Backside -->
                    <div id="backside-presets">
                        <h3>Choose a Preset:</h3>
                        <button class="preset-option">Preset 1</button>
                        <button class="preset-option">Preset 2</button>
                        <button class="preset-option">Preset 3</button>
                    </div>
                    <label for="backside-upload">Upload Card Back Image:</label>
                    <div id="upload-buttons">
                        <input type="file" id="backside-upload" accept="image/*">
                        <button id="apply-back-image" class="preset-option">Apply</button>
                        <!-- Apply also changes objectFill to cover ATM -->
                    </div>
                    <label for="border-control">Border Thickness</label>
                    <input type="range" min="0" max="44" value="8" id="border-control">
                    <label for="color-select">Choose Background Colour:</label><input id="color-select" type="color">
                    
                </div>        
            </section>

            <!-- Suit Icon Customization -->
            <section id="suit-icons">
                <div class="tab-title">
                    <h2>Suit Icons</h2>
                    <button id="editSuitBtn" class="editButton">Edit</button>
                </div>
                <div id="suit-selection">
                    <div id="editSuit" class="minimise">
                        <div id="icon-upload">
                            <label class="icon-upload-buttons" for="diamond-icon">
                                <label for="diamond-icon">Diamonds Icon:</label>
                                <div class="suit-btn-img-container">
                                    <img src="images/DiamondIcon-1.png">
                                    <img src="images/DiamondIcon-1.png" class="suit-upload-img-right">
                                    <input type="file" id="diamond-icon" accept="image/*">
                                </div>
                            </label>
                            <label class="icon-upload-buttons" for="heart-icon">
                                <label for="heart-icon">Hearts Icon:</label>
                                <div class="suit-btn-img-container">
                                    <img src="images/HeartIcon-1.png">
                                    <img src="images/HeartIcon-1.png" class="suit-upload-img-right">
                                    <input type="file" id="heart-icon" accept="image/*">
                                </div>
                            </label>
                            <label class="icon-upload-buttons" for="club-icon">
                                <label for="club-icon">Clubs Icon:</label>
                                <div class="suit-btn-img-container">
                                    <img src="images/ClubIcon-1.png">
                                    <img src="images/ClubIcon-1.png" class="suit-upload-img-right">
                                    <input type="file" id="club-icon" accept="image/*">
                                </div>
                            </label>
                            <label class="icon-upload-buttons" for="spade-icon">
                                <label for="spade-icon">Spades Icon:</label>
                                <div class="suit-btn-img-container">
                                    <img src="images/SpadeIcon-1.png">
                                    <img src="images/SpadeIcon-1.png" class="suit-upload-img-right">
                                    <input type="file" id="spade-icon" accept="image/*">
                                </div>
                            </label>
                        </div>

                        <div>
                            <label for="SuitIconSizer">Suit Icon Size</label><p id="icon-sizer-display">30</p>
                                <input type="range" min="34" max="84" value="64" id="SuitIconSizer"> 

                                <label for="SuitClassSizer">Suit Corner Icon Size</label><p id="suit-sizer-display">20</p>
                                <input type="range" min="20" max="40" value="40" id="SuitClassSizer"> 
                        </div>
                        
                    </div>
                </div>
                
            </section>

            <!-- Font Customization -->
            <section id="font-customization">
                <div class="tab-title">
                    <h2>Font Selection</h2>
                    <button id="editFontBtn" class="editButton">Edit</button>
                </div>
                <div id="editFont" class="minimise">
                        <h3>Choose a Preset:</h3>
                        <button class="preset-option">Preset 1</button>
                        <button class="preset-option">Preset 2</button>
                        <button class="preset-option">Preset 3</button>
                    <label for="font-select">Choose Font:</label>
                    <select id="font-select">
                        <option value="default">Default</option>
                        
                    </select>
                    <label for="color-select">Choose Colour:</label>
                    <input id="color-select" type="color">
                </div>
            </section>
        

            <section id="picture-cards">
                <div class="tab-title">
                    <h2>Picture Cards</h2>
                    <button class="editButton" id="editPicBtn">Edit</button>
                </div>
                <div id="editPic" class="minimise">
                    <!-- Preset Options for Backside -->
                    <div id="picture-presets">
                        <h3>Choose a Preset:</h3>
                        <button class="preset-option">Preset 1</button>
                        <button class="preset-option">Preset 2</button>
                        <button class="preset-option">Preset 3</button>
                    </div>
                    <div id="pic-card-upload-container">

                        <div id="upload-tab-btns">
                            <button class="upload-tab-btn selectedTab" id="kng-tab">King</button>
                            <button class="upload-tab-btn" id="qn-tab">Queen</button>
                            <button class="upload-tab-btn" id="jck-tab">Jack</button>
                            <button class="upload-tab-btn"id="jkr-tab">Joker</button>
                        </div>
                        
                        <div class="pic-card-upload" id="king-pic-card-upload">
                            <!-- <label class="pic-upload-label">King Images:</label> -->
                            <div class="button-menu"><button>King</button><button>Queen</button><button>Jack</button>
                            </div>
                            <label for="king-upload-diamonds" class="pic-card-upload-mask">
                                <img src="images/DiamondIcon-1.png">
                                <img src="images/DiamondIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="king-upload-diamonds" accept="image/*" placeholder="Diamonds">
                            </label>
                            <label for="king-upload-hearts" class="pic-card-upload-mask">
                                <img src="images/HeartIcon-1.png">
                                <img src="images/HeartIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="king-upload-hearts" accept="image/*" placeholder="Hearts">
                            </label>
                            <label for="king-upload-clubs" class="pic-card-upload-mask">
                                <img src="images/ClubIcon-1.png">
                                <img src="images/ClubIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="king-upload-clubs" accept="image/*" placeholder="Clubs">
                            </label>
                            <label for="king-upload-spades" class="pic-card-upload-mask">
                                <img src="images/SpadeIcon-1.png">
                                <img src="images/SpadeIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="king-upload-spades" accept="image/*" placeholder="Spades">
                            </label>
                        </div>

                        <div class="pic-card-upload" id="queen-pic-card-upload">
                            <!-- <label class="pic-upload-label">Queen Images:</label> -->
                            <label for="queen-upload-diamonds" class="pic-card-upload-mask">
                                <img src="images/DiamondIcon-1.png">
                                <img src="images/DiamondIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="queen-upload-diamonds" accept="image/*" placeholder="Diamonds">
                            </label>
                            <label for="queen-upload-hearts" class="pic-card-upload-mask">
                                <img src="images/HeartIcon-1.png">
                                <img src="images/HeartIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="queen-upload-hearts" accept="image/*" placeholder="Hearts">
                            </label>
                            <label for="queen-upload-clubs" class="pic-card-upload-mask">
                                <img src="images/ClubIcon-1.png">
                                <img src="images/ClubIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="queen-upload-clubs" accept="image/*" placeholder="Clubs">
                            </label>
                            <label for="queen-upload-spades" class="pic-card-upload-mask">
                                <img src="images/SpadeIcon-1.png">
                                <img src="images/SpadeIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="queen-upload-spades" accept="image/*" placeholder="Spades">
                            </label>
                        </div>

                        <div class="pic-card-upload" id="jack-pic-card-upload">
                            <!-- <label class="pic-upload-label">Jack Images:</label> -->
                            <label for="jack-upload-diamonds" class="pic-card-upload-mask">
                                <img src="images/DiamondIcon-1.png">
                                <img src="images/DiamondIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="jack-upload-diamonds" accept="image/*" placeholder="Diamonds">
                            </label>
                            <label for="jack-upload-hearts" class="pic-card-upload-mask">
                                <img src="images/HeartIcon-1.png">
                                <img src="images/HeartIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="jack-upload-hearts" accept="image/*" placeholder="Hearts">
                            </label>
                            <label for="jack-upload-clubs" class="pic-card-upload-mask">
                                <img src="images/ClubIcon-1.png">
                                <img src="images/ClubIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="jack-upload-clubs" accept="image/*" placeholder="Clubs">
                            </label>
                            <label for="jack-upload-spades" class="pic-card-upload-mask">
                                <img src="images/SpadeIcon-1.png">
                                <img src="images/SpadeIcon-1.png" class="pic-upload-img-right">
                                <input type="file" id="jack-upload-spades" accept="image/*" placeholder="Spades">
                            </label>
                        </div>

                        <div class="pic-card-upload" id="joker-pic-card-upload">
                            <!-- <label class="pic-upload-label">Joker Image:</label> -->
                            <div class="pic-card-upload-mask"><input type="file" id="joker-upload" accept="image/*"></div>
                        </div>
                    </div>
                    <div id="mirror-btns">
                        <button id="MirrorBtn" type="button">Mirror Picture Cards</button>
                        <button id="BorderPicBtn" type="button">Add Inner Border</button>
                    </div>
                    <label>Border</label>
                    <input type="checkbox" id="picCardBorder">
                </div>        
            </section>
        </div>



        <div class="tab" id="preview">   
            <!-- Preview Section -->
            <section id="card-preview">
                <div class="tab-title">
                    <h2>Card Preview</h2>
                    <button id="flipper" class="flipperButton">Flip</button>
                </div>
                <div id="preview-container">
                    <!-- The dynamically updated card preview will be displayed here -->
                    <div id="card">
                        <div id="transparency-bg"></div>
                        <div id="card-border">    
                        </div>
                            <div id="front-layout" class="red-suit-color">
                                <div id="top-left-id" class="id-front-layout">
                                    <p class="corner-class">A</p>
                                    <div class="classContainer">
                                    <img src="images/DiamondIcon-1.png" id="top-left-icon" class="icon corner-suit">
                                    </div>
                                </div>
                                


                                    <div id="tally-layout">
                                        <img src="images/DiamondIcon-1.png" id="center-icon" class="icon tally-icon Ace">
                                            <div id="iconColumnLeft" class="icon-column">
                                                <img src="images/DiamondIcon-1.png" id="Icon-1" class="icon tally-icon icon-number">
                                                <img src="images/DiamondIcon-1.png" id="Icon-2" class="icon tally-icon icon-number">
                                                <img src="images/DiamondIcon-1.png" id="Icon-3" class="icon tally-icon icon-number">
                                                <img src="images/DiamondIcon-1.png" id="Icon-4" class="icon tally-icon icon-number">
                                            </div>
                                            <div id="iconColumnMiddle" class="icon-column">     
                                                <img src="images/DiamondIcon-1.png" id="Icon-5" class="icon tally-icon icon-number">

                                                <img src="images/DiamondIcon-1.png" id="Icon-5b" class="icon tally-icon icon-number">
                                            
                                                <img src="images/DiamondIcon-1.png" id="Icon-6" class="icon tally-icon icon-number">
                                            </div>
                                            <div id="iconColumnRight" class="icon-column">    
                                                <img src="images/DiamondIcon-1.png" id="Icon-7" class="icon tally-icon icon-number">
                                                <img src="images/DiamondIcon-1.png" id="Icon-8" class="icon tally-icon icon-number">
                                                <img src="images/DiamondIcon-1.png" id="Icon-9" class="icon tally-icon icon-number">
                                                <img src="images/DiamondIcon-1.png" id="Icon-10" class="icon tally-icon icon-number">
                                            </div>    
                                            <div id="pictureCardLayout">
                                                <div id="pictureContainer" class="picture-card">
                                                    <img src="images/CardPreset3.svg" id="pictureImage" class="pic-img">
                                                    <img src="images/CardPreset3.svg" id="pictureImage2" class="pic-img">
                                                </div>
                                            </div>
                                    </div>



                                <div id="bottom-right-id" class="id-front-layout">
                                    <p class="corner-class bottom-right-class">A</p>
                                    <div class="classContainer">
                                    <img src="images/DiamondIcon-1.png" id="bottom-right-icon" class="icon corner-suit bottom-right-class">
                                    </div>
                                </div>
                            
                            </div>
                        <img id="card-image" src="images/CardFrontPlaceholder.svg">
                        <div id="card-front">
                            <a>Flip Card to Front</a>
                        </div>
                        <div id="back-container">
                            <div id="back-layout">
                                <img id="card-image-back" src="images/CardPresetOne.png" class="back-image">
                            </div>
                        </div>
                        <div id="card-back">
                            <a>Flip Card to Back</a>
                        </div>
                        
                    </div>
                </div>
                <div id="suit-selection">
                    <button class="change-suit" id="diamondBtn"><img src="images/DiamondIcon-1.png"><p>Diamonds</p><img src="images/DiamondIcon-1.png" id="suitBtnImg"></button>
                    <button class="change-suit" id="heartBtn"><img src="images/HeartIcon-1.png"><p>Hearts</p><img src="images/HeartIcon-1.png" id="suitBtnImg"></button>
                    <button class="change-suit" id="clubBtn"><img src="images/ClubIcon-1.png"><p>Clubs</p><img src="images/ClubIcon-1.png" id="suitBtnImg"></button>
                    <button class="change-suit" id="spadeBtn"><img src="images/SpadeIcon-1.png"><p>Spades</p><img src="images/SpadeIcon-1.png" id="suitBtnImg"></button>
                </div>

                <div id="number-selection">
                    <div class="card-number-option"><button id="aceBtn" class="selected">A</button></div>
                    <div class="card-number-option"><button id="twoBtn">2</button></div>
                    <div class="card-number-option"><button id="threeBtn">3</button></div>
                    <div class="card-number-option"><button id="fourBtn">4</button></div>
                    <div class="card-number-option"><button id="fiveBtn">5</button></div>
                    <div class="card-number-option"><button id="sixBtn">6</button></div>
                    <div class="card-number-option"><button id="sevenBtn">7</button></div>
                    <div class="card-number-option"><button id="eightBtn">8</button></div>
                    <div class="card-number-option"><button id="nineBtn">9</button></div>
                    <div class="card-number-option"><button id="tenBtn">10</button></div>
                    <div class="card-number-option"><button id="jackBtn">J</button></div>
                    <div class="card-number-option"><button id="queenBtn">Q</button></div>
                    <div class="card-number-option"><button id="kingBtn">K</button></div>
                    <div class="card-number-option"><button id="jokerBtn">?</button></div>
                    
                </div>
                <p id="cardIdent">1</p>
                <div id="download-buttons">
                    <button id="downloadBtn" class="downloadBtn" type="button">Download Card</button>
                    <button id="downloadAllBtn" class="downloadBtn" type="button">Download Deck</button>
                </div>
            </section>
        </div> 
        
        <div class="tab" id="deck-preview">
            <!-- Deck Preview Section -->
            <section id="deck-preview">
                <div class="tab-title">
                    <h2>Deck Preview</h2>
                    
                </div>
                <div id="deck-container">
                    <!-- The dynamically updated deck preview will be displayed here -->
                    <div id="deck">
                        <p>Deck Preview will be displayed here.</p>
                    </div>
                </div>
            </section>
           
            
        
    </main>

    <!-- Footer Section -->
    <footer>
        <p>Created by Logan McQuirk</p>
        <p>&copy; 2024 DeckDesign</p>
    </footer>

    
    <script src="script.js"></script> <!-- Link to my JavaScript file -->
    <script>
    
    
    document.getElementById("downloadBtn").addEventListener('click', () => {
        console.log("Download button clicked!");

        // Get the content of the card element
        const cardElement = document.getElementById("card");

        const originalStyle = cardElement.style.overflow;
        cardElement.style.overflow = "visible";

        // Use html2canvas to render the card element as an image
        html2canvas(cardElement, {
            scale: 3,
            useCORS: true,
            
            allowTaint: true,
            
        }).then((canvas) => {
            // Restore the original styles
            cardElement.style.overflow = originalStyle;

            // Create a new canvas with extra space for the bleed margin
            const bleedMargin = 36; // 36 pixels for bleed
            const newCanvas = document.createElement("canvas");
            newCanvas.width = canvas.width + bleedMargin * 2;
            newCanvas.height = canvas.height + bleedMargin * 2;

            const ctx = newCanvas.getContext("2d");

            // Fill the background with white (optional, for transparency handling)
            ctx.fillStyle = "white";
            ctx.fillRect(0, 0, newCanvas.width, newCanvas.height);

            // Draw the original canvas onto the new canvas with the bleed margin
            ctx.drawImage(canvas, bleedMargin, bleedMargin);

            // Convert the new canvas to a data URL
            const imgData = newCanvas.toDataURL("image/png");

            // Create a temporary link element
            const link = document.createElement("a");
            link.href = imgData;
            link.download = "card_with_bleed.png"; // Set the filename for the downloaded image

            // Trigger the download
            link.click();
        });
    });
    
    </script>

    <!-- Library Scripts -->
    
</body>
</html>
